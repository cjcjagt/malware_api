import  numpy as np
def data_iter(data, batch_size, ecoph_num, shuffle=False):
    data_temp = list(data)
    data_size = len(data_temp)
    batch_count = int((data_size - 1) / batch_size) + 1
    print("data_size: {}".format(data_size))
    print("batch_count: {}".format(batch_count))
    data = np.array(data_temp)
    for e in range(ecoph_num):
        shuffle_data = data
        if shuffle:
            shuffle_indices = np.random.permutation(np.arange(data_size))
            shuffle_data = np.array(data)[shuffle_indices.astype(int)]

        for i in range(batch_count):
            yield shuffle_data[min(i * batch_size,data_size): min((i + 1) * batch_size,data_size)]